import type { Metadata } from 'next'
import { GeistSans } from 'geist/font/sans'
import { GeistMono } from 'geist/font/mono'
import { Playfair_Display, Poppins } from 'next/font/google'
import './globals.css'
import { ThemeProvider } from '@/components/theme-provider'
import { useTheme } from 'next-themes'
import { useState, useEffect } from 'react'
import Link from 'next/link'
import Button from '@/components/ui/button'
import { Sun, Moon, Menu } from 'lucide-react'
import Sheet from '@/components/ui/sheet'
import SheetTrigger from '@/components/ui/sheet-trigger'
import SheetContent from '@/components/ui/sheet-content'
import dynamic from 'next/dynamic'

const nav = [
  { href: '#about', label: 'About' },
  { href: '#projects', label: 'Projects' },
  { href: '#contact', label: 'Contact' },
]

const MoonOceanCanvas = dynamic(() => import("./backgrounds/dark-ocean-canvas"), { ssr: false })


export const metadata: Metadata = {
  title: 'Vrinda Sri Gaur — AI Engineer | Poet | Business Strategist | Digital Marketing Expert',
  description:
    "Vrinda Sri Gaur — Createch Visionary, Tech Enthusiast & Creative Mind. B.Tech (CSE, Cybersecurity) | E-commerce Ops Pro | UI/UX Designer | Canva Graphic Designer | Published Poet | Part-time Teacher | Social Media Expert.",
  keywords: [
    'Vrinda Sri Gaur',
    'Createch Visionary',
    'Tech Enthusiast',
    'AI Engineer',
    'UI/UX Designer',
    'E-commerce',
    'Cybersecurity',
    'Poet',
    'Career Counselor',
    'Social Media Expert',
    'Portfolio',
    'India',
  ],
  authors: [{ name: 'Vrinda Sri Gaur', url: 'https://www.vrindasrigaur.me' }],
  metadataBase: new URL('https://www.vrindasrigaur.me'),
  openGraph: {
    type: 'website',
    url: 'https://www.vrindasrigaur.me',
    title: 'Vrinda Sri Gaur | Createch Visionary | Engineer & Poet',
    description:
      'Merging technology with creativity — B.Tech (CSE, Cybersecurity) student with experience in E-commerce Ops, UI/UX Design, Mentorship, and Published Poetry.',
    siteName: 'Vrinda Sri Gaur',
    images: [
      {
        url: 'https://www.vrindasrigaur.me/images/vrinda-portrait.jpg',
        width: 1200,
        height: 630,
        alt: 'Vrinda Sri Gaur Portrait',
      },
    ],
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Vrinda Sri Gaur | Createch Visionary | Engineer & Poet',
    description:
      'Tech + Creativity | E-commerce Ops | UI/UX Designer | Published Poet | Counselor | Social Media Expert.',
    images: ['https://www.vrindasrigaur.me/images/vrinda-portrait.jpg'],
  },
  icons: {
    icon: '/favicon.ico',
    shortcut: '/favicon.ico',
    apple: '/favicon-192x192.png',
  },
  verification: {
    other: {
      me: [
        'https://linkedin.com/in/vrinda-sri-gaur',
        'https://instagram.com/@__vrindiii__',
        'https://www.yourquote.in/vrinda-gaur-bmgmg/quotes',
      ],
    },
  },
}

const playfair = Playfair_Display({ subsets: ['latin'], variable: '--font-playfair' })
const poppins = Poppins({ subsets: ['latin'], weight: ['300','400','500','600','700'], variable: '--font-poppins' })

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning className="scroll-smooth">
      <head>
        {/* Prevent theme flash and ensure html.dark is set ASAP */}
        <script
          dangerouslySetInnerHTML={{
            __html: `
            (function() {
              try {
                var t = localStorage.getItem('theme');
                var d = t ? (t === 'dark' || (t === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) : true;
                if (d) document.documentElement.classList.add('dark');
              } catch (e) {}
            })();
          `,
          }}
        />
        <style>{`
          html {
            font-family: ${GeistSans.style.fontFamily};
            --font-sans: ${poppins.variable};
            --font-mono: ${GeistMono.variable};
            --font-serif: ${playfair.variable};
          }
        `}</style>
      </head>
      <body className={`${playfair.variable} ${poppins.variable} font-sans`}>
        <ThemeProvider attribute="class" defaultTheme="dark" enableSystem disableTransitionOnChange>
          {children}
        </ThemeProvider>
      </body>
    </html>
  )
}

export function SiteHeader() {
  const { setTheme, resolvedTheme } = useTheme()
  const [mounted, setMounted] = useState(false)
  useEffect(() => setMounted(true), [])

  function applyHtmlClass(next: 'light' | 'dark' | 'system') {
    try {
      const root = document.documentElement
      const preferDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
      const isDark = next === 'dark' || (next === 'system' && preferDark)
      root.classList.toggle('dark', isDark)
      localStorage.setItem('theme', next)
    } catch {}
  }

  const isDark = mounted ? resolvedTheme === 'dark' : true

  return (
    <header className="sticky top-0 z-50 w-full border-b bg-background/70 backdrop-blur supports-[backdrop-filter]:bg-background/50">
      <div className="mx-auto flex max-w-7xl items-center justify-between px-4 py-3">
        <Link href="#hero" className="group inline-flex items-center gap-2">
          <Menu className="h-5 w-5 text-pink-500 transition-transform group-hover:-rotate-12" />
          <span className="font-serif text-lg font-bold">Vrinda Sri Gaur</span>
        </Link>

        <nav className="hidden items-center gap-6 md:flex">
          {nav.map((n) => (
            <a key={n.href} href={n.href} className="text-sm text-muted-foreground hover:text-foreground">
              {n.label}
            </a>
          ))}
          <Button
            variant="ghost"
            size="icon"
            aria-label="Toggle theme"
            aria-pressed={isDark}
            onClick={() => {
              const next = isDark ? 'light' : 'dark'
              setTheme(next)
              applyHtmlClass(next)
            }}
          >
            {isDark ? <Sun className="h-5 w-5" /> : <Moon className="h-5 w-5" />}
          </Button>
        </nav>

        <div className="md:hidden">
          <Sheet>
            <SheetTrigger asChild>
              <Button variant="ghost" size="icon" aria-label="Open menu">
                <Menu className="h-5 w-5" />
              </Button>
            </SheetTrigger>
            <SheetContent side="right" className="flex flex-col gap-4">
              <div className="mt-8 flex flex-col gap-4">
                {nav.map((n) => (
                  <a key={n.href} href={n.href} className="text-base" aria-label={`Go to ${n.label}`}>
                    {n.label}
                  </a>
                ))}
                <Button
                  variant="secondary"
                  className="mt-2"
                  onClick={() => {
                    const next = isDark ? 'light' : 'dark'
                    setTheme(next)
                    applyHtmlClass(next)
                  }}
                >
                  {isDark ? 'Light mode' : 'Dark mode'}
                </Button>
              </div>
            </SheetContent>
          </Sheet>
        </div>
      </div>
    </header>
  )
}

import { motion } from 'framer-motion'
import { useTheme } from 'next-themes'
import { useState, useEffect } from 'react'
import dynamic from 'next/dynamic'

const HeroPoem = dynamic(() => import('@/components/hero-poem'), { ssr: false })

export default function Hero() {
  const { resolvedTheme } = useTheme()
  const [mounted, setMounted] = useState(false)
  useEffect(() => setMounted(true), [])

  const isDark = mounted ? resolvedTheme === 'dark' : true

  return (
    <section className="relative flex h-screen items-center justify-center overflow-hidden">
      <div className="absolute inset-0">
        {mounted && isDark ? (
          <MoonOceanCanvas />
        ) : (
          <div className="absolute inset-0 bg-gradient-to-b from-pink-50 via-rose-50 to-amber-50" />
        )}
      </div>
      <motion.figure
        className="relative mx-auto max-w-3xl px-4 text-center"
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
      >
        <div className="absolute inset-0 bg-background/50 backdrop-blur supports-[backdrop-filter]:bg-background/30" />
        <div className="absolute inset-0 bg-background/50 backdrop-blur supports-[backdrop-filter]:bg-background/30" />
        <div className="absolute inset-0 bg-background/50 backdrop-blur supports-[backdrop-filter]:bg-background/30" />
        <div className="absolute inset-0 bg-background/50 backdrop-blur supports-[backdrop-filter]:bg-background/30" />
        <div className="absolute inset-0 bg-background/50 backdrop-blur supports-[backdrop-filter]:bg-background/30" />
        <HeroPoem />
      </motion.figure>
    </section>
  )
}
